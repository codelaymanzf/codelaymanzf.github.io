(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{437:function(t,a,s){"use strict";s.r(a);var o=s(53),n=Object(o.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h3",{attrs:{id:"点击劫持-clickjacking"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#点击劫持-clickjacking"}},[t._v("#")]),t._v(" 点击劫持 (clickjacking)")]),t._v(" "),s("blockquote",[s("p",[t._v("点击劫持是一种视觉欺骗的攻击手段。攻击者将需要攻击的网站通过 iframe 嵌套的方式嵌入自己的网页中，并将 iframe 设置为透明，在页面中透出一个按钮诱导用户点击。")])]),t._v(" "),s("h3",{attrs:{id:"防御"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#防御"}},[t._v("#")]),t._v(" 防御")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("JS 方式")]),t._v(" "),s("blockquote",[s("p",[t._v("如果攻击网站的"),s("code",[t._v("top.location")]),t._v("与 iframe 中的"),s("code",[t._v("window.location")]),t._v("不同，则直接跳转到 iframe 引入的地址，代码如下：")])]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("top"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("location "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("location"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        top"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("location "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("location"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("此方法的弊端在于，如果攻击者将 JS 禁止掉，刚以上代码不会生效，则不会跳转。")])]),t._v(" "),s("blockquote",[s("p",[t._v("js 禁止使用，那用户是不是点击也不会生效？")])]),t._v(" "),s("blockquote",[s("p",[t._v("不对。HTML5 给 iframe 新增加了 sandbox 属性，若设置"),s("code",[t._v("sandbox='allow-forms'")]),t._v(", 则页面脚本不会执行，但允许提交表单。")])])]),t._v(" "),s("li",[s("p",[t._v("X-FRAME-OPTIONS")]),t._v(" "),s("blockquote",[s("p",[s("code",[t._v("X-FRAME-OPTIONS")]),t._v(" 是一个 HTTP 响应头，在现代浏览器有一个很好的支持。这个 HTTP 响应关就是为了防御用 iframe 嵌套的点击劫持攻击。\n该响应头有三个值可选，分别是：")]),t._v(" "),s("ul",[s("li",[t._v("DENY, 表示页面不允许通过 iframe 的方式展示")]),t._v(" "),s("li",[t._v("SAMEORIGIN, 表示页面可以在相同域名下通过 iframe 的方式展示")]),t._v(" "),s("li",[t._v("ALLOW-FROM, 表示页面可以在指定来源的 iframe 中展示")])])])])])])}),[],!1,null,null,null);a.default=n.exports}}]);