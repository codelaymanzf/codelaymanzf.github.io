(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{462:function(s,t,a){"use strict";a.r(t);var n=a(53),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"webpack-优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack-优化"}},[s._v("#")]),s._v(" webpack 优化")]),s._v(" "),a("h2",{attrs:{id:"webpack-构建速度优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack-构建速度优化"}},[s._v("#")]),s._v(" webpack 构建速度优化")]),s._v(" "),a("ul",[a("li",[a("h3",{attrs:{id:"使用高版本的-webpack-和-node-js"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用高版本的-webpack-和-node-js"}},[s._v("#")]),s._v(" 使用高版本的 webpack 和 Node.js")])]),s._v(" "),a("li",[a("h3",{attrs:{id:"缩小构建目标"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#缩小构建目标"}},[s._v("#")]),s._v(" 缩小构建目标")]),s._v(" "),a("ul",[a("li",[s._v("不解析 node_modules\n"),a("ul",[a("li",[a("code",[s._v("loader")]),s._v("配置时添加"),a("code",[s._v("include: path.resolve(___dirname, './src')")])])])])])]),s._v(" "),a("li",[a("h3",{attrs:{id:"减少文件搜索范围"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#减少文件搜索范围"}},[s._v("#")]),s._v(" 减少文件搜索范围")]),s._v(" "),a("ul",[a("li",[s._v("使用"),a("code",[s._v("resolve")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("modules: path.resolve(___dirname, './node_modules')")])]),s._v(" "),a("li",[a("code",[s._v("alias")])]),s._v(" "),a("li",[a("code",[s._v("extensions")])])])])])]),s._v(" "),a("li",[a("h3",{attrs:{id:"多进程-多实例构建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#多进程-多实例构建"}},[s._v("#")]),s._v(" 多进程/多实例构建")]),s._v(" "),a("ul",[a("li",[s._v("使用"),a("code",[s._v("happypack")]),s._v("插件\n"),a("blockquote",[a("p",[s._v("小项目中效果并不明显")])])])])]),s._v(" "),a("li",[a("h3",{attrs:{id:"分包：预编译资源模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分包：预编译资源模块"}},[s._v("#")]),s._v(" 分包：预编译资源模块")]),s._v(" "),a("ul",[a("li",[s._v("方法一： 使用"),a("code",[s._v("DLLPlugin")]),s._v("进行分包,"),a("code",[s._v("DLLReferencePlugin")]),s._v("对"),a("code",[s._v("manifest.json")]),s._v("进行引用")]),s._v(" "),a("li",[s._v("方法二： 使用"),a("code",[s._v("hard-source-webpack-plugin")]),s._v("插件")])])]),s._v(" "),a("li",[a("h3",{attrs:{id:"利用缓存提升二次构建速度"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#利用缓存提升二次构建速度"}},[s._v("#")]),s._v(" 利用缓存提升二次构建速度")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("babel-loader")]),s._v("开启缓存")]),s._v(" "),a("li",[a("code",[s._v("terser-webpack-plugin")]),s._v("开启缓存")]),s._v(" "),a("li",[a("code",[s._v("cache-loader")]),s._v("或者"),a("code",[s._v("hard-source-webpack-plugin")])])]),s._v(" "),a("h3",{attrs:{id:"多进程并行压缩代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#多进程并行压缩代码"}},[s._v("#")]),s._v(" 多进程并行压缩代码")]),s._v(" "),a("ul",[a("li",[s._v("方法一：使用"),a("code",[s._v("parallel-uglify-plugin")]),s._v("插件")]),s._v(" "),a("li",[s._v("方法二：使用"),a("code",[s._v("uglifyjs-webpack-plugin")]),s._v("开启"),a("code",[s._v("parallel")]),s._v("参数")]),s._v(" "),a("li",[s._v("方法三：使用"),a("code",[s._v("terser-webpack-plugin")]),s._v("开启"),a("code",[s._v("parallel")]),s._v("参数")])])])]),s._v(" "),a("br"),s._v(" "),a("h2",{attrs:{id:"webpack-打包体积优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack-打包体积优化"}},[s._v("#")]),s._v(" webpack 打包体积优化")]),s._v(" "),a("ul",[a("li",[a("h3",{attrs:{id:"使用-tree-shaking-剔除无用的-css-和-js"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-tree-shaking-剔除无用的-css-和-js"}},[s._v("#")]),s._v(" 使用 Tree Shaking 剔除无用的 CSS 和 JS")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("CSS tree shaking")]),s._v(" "),a("p",[a("code",[s._v("npm i glob-all purify-css purifycss-webpack --save-dev")])]),s._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[s._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" PurifyCSS "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'purifycss-webpack'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" glob "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'glob-all'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n  plugins"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 清除 css")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("PurifyCSS")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          paths"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" glob"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n              "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 要做 CSS Tree Shaking 的 径 件")]),s._v("\n              path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./src/*.html'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 请注意，我们同样需要对html文件进行tree shaking")]),s._v("\n              path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./src/*.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),a("ul",[a("li",[s._v("JS tree shaking")])])])])]),s._v(" "),a("li",[a("h3",{attrs:{id:"图片压缩"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#图片压缩"}},[s._v("#")]),s._v(" 图片压缩")])]),s._v(" "),a("li",[a("h3",{attrs:{id:"html-压缩"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#html-压缩"}},[s._v("#")]),s._v(" HTML 压缩")]),s._v(" "),a("p",[a("code",[s._v("npm i html-webpack-plugin --save-dev")])]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("htmlWebpackPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      title"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"京东商城"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      template"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./index.html"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      filename"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"index.html"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      minify"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 压缩 HTML 件")]),s._v("\n          removeComments"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 移除 HTML 中的注释")]),s._v("\n          collapseWhitespace"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 删除空白符与换行符")]),s._v("\n          minifyCSS"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 压缩内联 css")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])])])]),s._v(" "),a("li",[a("h3",{attrs:{id:"css-压缩"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#css-压缩"}},[s._v("#")]),s._v(" CSS 压缩")]),s._v(" "),a("p",[a("code",[s._v("npm i optimize-css-assets-webpack-plugin -D")]),s._v(" "),a("code",[s._v("npm install cssnano -D")])]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" OptimizeCSSAssetsPlugin "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"optimize-css-assets-webpack-plugin"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("OptimizeCSSAssetsPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  cssProcessor"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cssnano"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//引入cssnano配置压缩选项")]),s._v("\n  cssProcessorOptions"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    discardComments"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" removeAll"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])])]),s._v(" "),a("li",[a("h3",{attrs:{id:"使用动态-polyfill-服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用动态-polyfill-服务"}},[s._v("#")]),s._v(" 使用动态 Polyfill 服务")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);