(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{474:function(v,_,t){"use strict";t.r(_);var a=t(53),i=Object(a.a)({},(function(){var v=this,_=v.$createElement,t=v._self._c||_;return t("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[t("h1",{attrs:{id:"diff-algorithm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#diff-algorithm"}},[v._v("#")]),v._v(" Diff Algorithm")]),v._v(" "),t("h2",{attrs:{id:"diff-策略"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#diff-策略"}},[v._v("#")]),v._v(" diff 策略")]),v._v(" "),t("ul",[t("li",[v._v("同级比较， Web UI 中 DOM 节点跨层级的移动操作特别少，可以忽略不计。")]),v._v(" "),t("li",[v._v("拥有相同类的两个组件将会生成相似的树形结构，拥有不同类的两个组件将会生成不同的树形结构")]),v._v(" "),t("li",[v._v("开发者可以通过"),t("code",[v._v("key")]),v._v(" prop 来暗示哪些子元素在不同的渲染下能保持稳定")])]),v._v(" "),t("h2",{attrs:{id:"diff-过程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#diff-过程"}},[v._v("#")]),v._v(" diff 过程")]),v._v(" "),t("p",[t("strong",[v._v("比对两个虚拟 DOM 时会有三种操作：删除、替换、更新")])]),v._v(" "),t("ul",[t("li",[v._v("删除：newVnode 不存在时")]),v._v(" "),t("li",[v._v("替换：vnode 和 newVnode 类型不同或者 key 不同")]),v._v(" "),t("li",[t("strong",[v._v("更新")]),v._v("：有相同类型和 key，但 vnode 和 newVnode 不同")])]),v._v(" "),t("h2",{attrs:{id:"更新操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#更新操作"}},[v._v("#")]),v._v(" 更新操作")]),v._v(" "),t("p",[t("strong",[v._v("根据组件类型执行不同更新操作")])]),v._v(" "),t("ul",[t("li",[v._v("class 类型组件")]),v._v(" "),t("li",[v._v("函数类型组件")]),v._v(" "),t("li",[v._v("元素类型")])]),v._v(" "),t("h2",{attrs:{id:"patch-过程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#patch-过程"}},[v._v("#")]),v._v(" patch 过程")]),v._v(" "),t("blockquote",[t("p",[v._v("虚拟 DOM 比对，最终要转换为对应 patch 操作")])]),v._v(" "),t("ul",[t("li",[v._v("属性更新")]),v._v(" "),t("li",[v._v("子元素更新")])]),v._v(" "),t("h2",{attrs:{id:"patchchildren-过程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#patchchildren-过程"}},[v._v("#")]),v._v(" patchChildren 过程")]),v._v(" "),t("ul",[t("li",[v._v("老节点是空的，新节点是空的，什么都不需要作")]),v._v(" "),t("li",[v._v("老节点是空的，新节点是单个")]),v._v(" "),t("li",[v._v("老节点是空的，新节点是多个")]),v._v(" "),t("li",[v._v("老节点是单个，新节点是空的")]),v._v(" "),t("li",[v._v("老节点是单个，新节点是单个")]),v._v(" "),t("li",[v._v("老节点是单个，新节点是多个")]),v._v(" "),t("li",[v._v("老节点是多个，新节点是空的")]),v._v(" "),t("li",[v._v("老节点是多个，新节点是单个")]),v._v(" "),t("li",[t("strong",[v._v("老节点是多个，新节点是多个")]),v._v(" (abcd->dabef)\n"),t("ul",[t("li",[v._v("新增：老节点中没有，新节点中有，则需要新增(如 e、f)")]),v._v(" "),t("li",[v._v("删除：老节点中有，新节点中没有（如 c)")]),v._v(" "),t("li",[t("code",[v._v("复用：相同的type和key,那就需要patch更新属性、判断位置是否需要移动")]),v._v("(如 a、b、d)")])])])])])}),[],!1,null,null,null);_.default=i.exports}}]);